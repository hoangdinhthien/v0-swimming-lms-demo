NOTES:

FIX UI:

- sửa lại lịch & thêm auto xếp lịch trong lịch (fix lại auto xếp lịch), thêm thông báo/notes rằng hồ bơi quá tải ==> done

- thêm logic button 'Thêm vào lớp học' trang manager/student detail, xài api add-student (check xem có order hay ch)

- thêm logic button 'Phân công lớp học mới' trang manager/instructor detail

- thêm logic button 'Xem lịch dạy' trang manager/instructor detail

- sửa find common: searchOr (done classes & orders)

- làm phần certifcate: vô bảng certificate review, cái đó là cái frame thôi nha fe lấy thông tin user hiện ra

- làm phần data-review: xong manager, ch xong staff

- thêm select all trong quản lý học viên ==> done

- sửa form_judge lại cho user friendly, hiện tại đang quá kỹ thuật, thêm field mẫu sẵn ==> semi done

- sửa lại searchOr trong order: đang không hiện lên UI => done

- check lại UI của staff: nếu ko có permission thì vẫn phải login đc vào system nhưng ko cho xem j hết

- vẽ diagram source code folder


- xem lịch học của member => done
- xem lịch dạy của instructor => done
- update order || tạo order => done
- thêm nút refresh vào trang orders giống các trang còn lại => done
- thêm thông báo/toast cho staff có noReview: false


BÂY GIỜ TÔI CẦN BẠN SỬA LẠI LOGIC CỦA TÍNH NĂNG AUTO SCHEDULE CLASS (TỰ ĐỘNG XẾP LỊCH HỌC CHO 1 LỚP HỌC)

- đầu tiên: trước khi tự động xếp lịch học, bạn phải cần xác định được ngày hôm nay là ngày THỨ MẤY TRONG TUẦN? 
- để biết được hôm nay là ngày thứ mấy trong tuần () thì làm bằng cách code mẫu này: 
    // lấy ngày hiện tại 
    const today = new Date(); // 
    const dayOfWeek = today.getDay();
    // 0 = Chủ Nhật
    // 1 = Thứ 2
    // 2 = Thứ 3
    // ...
    // 6 = Thứ 7
- đây sẽ là MẶC ĐỊNH cho các ngày trong tuần TRÊN UI: chủ nhật= 0, t2 = 1, t3 = 2, t4 = 3, t5 = 4, t6 = 5, t7 = 6
- sau khi bạn xác định được ngày hiện tại là ngày nào rồi, thì sau đó sẽ áp dụng theo logic ở bảng ví dụ dưới đây ĐỂ CÓ THỂ GÁN CÁC NGÀY TRONG TUẦN VÀO TRONG FIELD 'array_number_in_week':
Hôm nay |   Thứ 2       |    Thứ 7      |     Chủ Nhật        | array_number_in_week
---------------------------------------------------------------------------
T2 (1)  | 1-1=0      | 6-1=5      | 0-1=-1→6      | [0, 5, 6]
T4 (3)  | 1-3= -2 → 5   | 6-3=3      | 0-3=-3→4      | [3, 4, 5]
T7 (6)  | 1-6=-5→2   | 6-6=0      | 0-6=-6→1      | [0, 1, 2]
CN (0)  | 1-0=1      | 6-0=6      | 0-0=0         | [0, 1, 6]
- ví dụ: tính được rằng hôm nay là thứ 6 => thứ 6 = 0 => sau đó dựa vào bảng ví dụ để tính được 'array_number_in_week' cần phải bỏ vào request body của api auto xếp lịch 

==============================================================

- LÀM UI KHÔNG ĐƯỢC MÀU MÈ, BỚT MÀU MÈ LẠI, BỚT ICON, UI ĐƠN GIẢN VÀ HIỆN NHỮNG THÔNG TIN MANAGER/STAFF CẦN XEM, UI HIỆN TẠI NHÌN NHƯ DÀNH CHO TRẺ CON VẬY CHẢ GIỐNG VỚI HỆ THỐNG TRANG QUẢN LÝ!! (QUAN TRỌNG NHẤT LÀ CLASS & COURSE) (LÀM UI CHO TƯỜNG MINH)

*COURSE & LỊCH (ƯU TIÊN)

- lịch: tự động xếp lịch: làm UI rõ ràng hơn, cho chọn nhiều lớp hoặc một lớp khi tự động xếp lịch, nút 'Tiếp tục' trong modal chọn lớp khi tự động xếp lịch đang vô dụng

- lịch: tạo nhiều khóa học và xếp lịch cho nhiều lớp cùng 1 lúc trong lịch

- lịch: thêm logic cho drawer trong lịch khi tạo chỉnh sửa/thêm lớp học vào lịch
    - chọn theo thứ tự, sau đó rồi mới cho chọn tiếp: chọn khung giờ + lớp học trước sau đó mới cho chọn các thứ còn lại (tính logic để show ra hồ bơi thích hợp này kia... sau khi cho chọn khung giờ + lớp học xong)
    - chỉ cho chọn Huấn luyện viên nếu lớp chưa có Huấn luyện viên, nếu lớp có Huấn luyện viên rồi thì hiện thẳng tên của Huấn luyện viên đó trong phần chọn luôn

- course: xóa phần 'xem schema' trong create course & edit course => done

- course: form judge: làm UI cho na ná của gg form, hiện tại nhìn vào đang không hiểu gì hết (kể cả khi view course detail, create course, edit)

- class: thông tin lớp học trong class detail: hiện tên thôi (làm UI tường minh)


*ORDER
- thêm logic refund: manager gọi api refund

quy định độ tuổi: gắn vs hồ pơi để validate
pool có type of age: check với tuổi của student để thao tác lịch
khi tạo user mới sẽ required birthday

- thêm search + filter khi xếp lịch
- logic thứ tự cho auto xếp lịch + tạo lớp: course -> khung giờ -> get schedule của instructor đó ra và check để chọn instructor -> tên class (generate tên class dựa theo course và slot) (UI: sẽ cho chọn theo slot -> chọn từ slot nào đến slot nào để suy ra  được min_time và max_time)


- đây là logic và các thứ tự: manager/staff sẽ chọn course và khung giờ học trước tiên -> sau đó là sẽ generate tên class dựa theo mã cho dễ xác định (generate theo tên class dựa theo course và slot) -> sau đó là sẽ chọn instructor và get schedule của instructor đó ra và check xem là các lịch hiện tại của instructor đó có phù hợp hay không (instructor có available trong khung giờ đó không) để chọn instructor cho phù hợp 

- lưu ý ở phần logic 'manager/staff sẽ chọn course và khung giờ học trước tiên': ở phần chọn Khung giờ học, hiện tại trên UI đang để cho manager/staff tự chọn các field min_time và max_time. bây giờ sẽ không cho làm như vậy nữa mà sẽ phải dựa vào thông tin của slots mà manager/staff chọn để mà calculate ra được min_time và max_time cho đúng, ví dụ khi tạo lớp học và xếp lịch tự động manager/staff chọn slot từ slot 1 đến slot 5 (từ 7 giờ đến 11 giờ) thì mình phải dựa vào đó mà tính ra được min_time và max_time. Còn về phần chọn ngày học thì sẽ giữ như cũ.
- CÓ THẮC MĂC GÌ THÌ CỨ HỎI TÔI

(UI: sẽ cho chọn theo slot -> chọn từ slot nào đến slot nào để suy ra  được min_time và max_time)

Manager:
- Khi tạo một lớp học cần support user có thể lựa chọn được instructor phù hợp cho khóa học của lớp học đó
- Khi xếp lớp cần thêm các validate, warning về các trường hợp:
	1. Tránh việc một instructor được xếp lịch dạy cho hai lớp khác nhau tại một thời điểm
  	2. Tránh việc thiếu tài nguyên hồ bơi do xếp lịch vào các hồ bơi vượt quá sức đáp ứng của hồ và cùng một thời điểm
	3. Thêm ràng buộc liên quan giữa course và pool thông qua độ tuổi ( hồ bơi dành cho trẻ em, người lớn, hỗn hợp)

hover > tự động xêp lihcj hoặc tạo lớp thêm filter search

- làm theo step (vd: antd step)

preview lịch > xác nhận > tạo lớp hàng loạt
preview > xác nhận > 

LỊCH: 
-case 1: xếp lịch hàng loạt cho lớp có sẵn (manager/schedule/auto/preview)
auto xếp lịch (ko xài schedule/auto -> thay bằng api tạo lịch bình thường) -> preview lịch + warning (nếu có thông tin bị trùng: check schedule của instructor) -> xác nhận + chọn pool + validate pool (cho sửa trực tiếp) -> tạo lịch theo api tạo lịch bình thường -> done (làm theo steps)

-case 2: tạo lớp hàng loạt + case 1
tạo lớp hàng loạt (có validate các thông tin: instructor, age rule,..., course validate: hiện chi tiết instructor đó có và thiếu gì) -> chỉ hiện lên UI các lớp học vừa mới tạo (lấy các insertedId respone data khi tạo lớp học -> search[_id:equal] là được) -> case 1 -> (làm theo steps)



tạo lớp

step 2: cho hiện chuyên môn luôn, api lấy instructor phù hợp vs lớp (profile + level matching)

step 2: cho chặn luôn, 
làm api get instructor phù hợp cho khoá học, sort theo mức độ phù hợp 

step 2: check lịch trùng (cái gì thông tin gì) 

xếp lịch : gộp step 2 và 3 

thêm sort hồ bơi + hiện chi tiết schedule hồ bơi + hover vào sẽ hiện thông tin chi tiết của hồ bơi + thêm dấu tick hoặc cross 

thêm nút refresh vào model, cho chỉnh sửa schedule 

- XẾP LỊCH CHO LỚP CÓ SẮN (schedule-preview-modal.tsx): 
    . step 3: đổi get fetchPools => thành (post) /workflow-process/manager/pool/available: 
        . trả ra list hồ bơi phù hợp cho lịch học đó (api preview), từng lịch, sau đó, tự tính lại max member, logic như cũ, chỉ thay api và tính lại dựa theo respons của api NÀY

- check lại lưu ở step 2

=====


- staff tạo lớp trong lịch (cho tất cả module): hiện message trên UI 'không có quyền tạo lớp trực tiếp, phải đợi view mới qua step 2 được'

- manager data-review: sẽ thêm api mới - get data-review-detail (param: truyền _id & type)


- search order: tìm/filter cùng lúc member vs khoá học (ví dụ: tìm xem học viên đó có đăng ký cho khoá học này không và ngược lại)


- hiện form-judge trong 'Chi tiết buổi học' trong lịch học

- cho sửa title khi edit form judge

- bỏ tab báo cáo ở trang '/dashboard/manager'